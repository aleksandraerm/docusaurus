---
sidebar_position: 2
---

# Баннер под меню

## Создание/редактирование баннера

Для редактирования/создания баннера выполните следующие шаги:

![-](https://i.postimg.cc/PrXdJNzz/1.png)

1. Кликните «Контент»;
2. Кликните «Контент» → «Элемент»;
3. У элемента, который нужно изменить, кликните «Действия» → «Изменить» (или двойным щелчком).
Если нужно добавить новый элемент, кликните «Добавить элемент».
4. На странице выберете шаблон «Иконка + текст + кнопка»; «Текст + кнопка» или «Картинка», заполните необходимые поля и кликните «Сохранить».

Заполнение шаблонов:
- «Иконка + текст + кнопка» заполняются: «Название», «Иконка» (маленькое квадратное изображение, например 32х32), «Текст кнопки», «Ссылка кнопки» (любая внутренняя ссылка), «Тип баннера», текст в поле «Описание для анонса» на вкладке «Анонс»;
- «Текст + кнопка» заполняются: «Название», «Текст кнопки», «Ссылка кнопки», «Тип баннера», «Описание для анонса» на вкладке «Анонс»;
- «Картинка» заполняются: «Название», «Картинка» (примерно 250х170), «Ссылка кнопки», «Тип баннера».

## Отображение баннера

Баннер отображается только в десктопной версии и бывает 3 видов:
- Иконка + текст + кнопка:

![-](https://i.postimg.cc/kgkrQ58H/2.png)

- Текст + кнопка:

![-](https://i.postimg.cc/sD7HkJZT/3.png)

- Картинка (без текста и кнопки):

![-](https://i.postimg.cc/6qdVmY1R/4.png)

Каждый показ баннера пользователю и переходы по клику на баннер сохраняются в статистике `user_event_statistic` (тип события `user_event_statistic_type`).
По клику на иконку «Скрыть» (крестик) баннер у пользователя скрывается. Баннер отображается снова после изменения/добавления баннера администратором МЛ через администрирование сайта.

## Статистика

Таблицы:
- `user_event_statistic` – статистика показа баннера и переходы по клику на баннер;
- `user_event_statistic_type` – тип события:
    - «Показ баннера»; 
    - «Переход с баннера»; 
    - «Скрытие баннера»;
- `sidebar_banner_users_hide` – пользователи, которые скрыли баннер. Если баннер снова выводится, то в таблице удаляется запись о скрытии.
Для подсчета статистики в созданных элементах в конце ссылок добавляется параметр `?sidebar_banner_id=*`, где * id элемента:

![-](https://i.postimg.cc/6pG6JgfD/5.png)

В том числе в ссылках, которые были добавлены в «Описание для анонса».
Агент
После запуска агента `\UserEventStatisticTable::updateSidebarBannerStatistic();` (по умолчанию запускается раз в сутки) в элементах баннеров проставляются значения в полях «Переходы», «Показы» высчитывается значение в «CTR %» по формуле: CTR = количество переходов / количество показов × 100% в соответствии с данными таблицы `user_event_statistic`:

![-](https://i.postimg.cc/7hW4jnGH/6.png)